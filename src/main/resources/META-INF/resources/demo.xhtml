<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<f:view contentType="text/html">
	<h:head>
		<title>.:: Login JoinFaces Example ::.</title>
		<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
		<link href="#{resource['images/favicon.ico']}" rel="shortcut icon" />
	</h:head>
	<h:body>
		<pe:layout fullPage="true">
			<pe:layoutPane position="center">
				<h:form id="form-reporte">

					<div class="ui-g-12">
						<p:commandButton id="btn-filtar" value="Filtrar" title="Filtar"
							icon="fa fa-fw fa-save" actionListener="#{demoWeb.filtar()}"
							update=":form-reporte:datatable-reporte,
									:form-reporte:treeTable-agenciasTree,
									:form-reporte:char-agencias,
									:form-reporte:char-mixAgencias"
							styleClass="btn-success">
						</p:commandButton>
					</div>

					<div class="ui-g-12">
						<p:dataTable id="datatable-reporte" value="#{demoWeb.agencias}"
							var="agencia" emptyMessage="">
							<p:columnGroup type="header">
								<p:row>
									<p:column rowspan="3" colspan="2" headerText="Agencia"
										sortBy="#{agencia.nombre}" />
									<p:column colspan="6" headerText="Productividad" />
									<p:column colspan="6" headerText="" />
								</p:row>
								<p:row>
									<p:column colspan="2" headerText="Nuevos" />
									<p:column colspan="2" headerText="Campañas" />
									<p:column colspan="2" headerText="Otros" />
									<p:column colspan="3" headerText="Cartera" />
									<p:column colspan="3" headerText="Cartera Anterior" />
								</p:row>
								<p:row>
									<p:column headerText="N° Desembolsos" />
									<p:column headerText="Monto" />
									<p:column headerText="N° Desembolsos" />
									<p:column headerText="Monto" />
									<p:column headerText="N° Desembolsos" />
									<p:column headerText="Monto" />
									<p:column headerText="Nro Clientes" />
									<p:column headerText="Nro Creditos" />
									<p:column headerText="Saldos" />
									<p:column headerText="Nro Clientes" />
									<p:column headerText="Nro Creditos" />
									<p:column headerText="Saldos" />
								</p:row>
							</p:columnGroup>

							<!-- 							<p:column headerText="Nro" style="width: 8%;"> -->
							<!-- 								<h:outputText value="#{index + 1}" /> -->
							<!-- 							</p:column> -->
							<p:column style="width:16px">
								<p:rowToggler />
							</p:column>
							<p:column headerText="Agencia">
								<h:outputText value="#{agencia.nombre}" />
							</p:column>
							<p:column headerText="N° Desembolzo">
								<h:outputText value="#{agencia.nuevoDesembolzos}" />
							</p:column>
							<p:column headerText="Monto">
								<h:outputText value="#{agencia.nuevoMontos}" />
							</p:column>
							<p:column headerText="N° Desembolsos">
								<h:outputText value="#{agencia.campaniaDesembolzos}" />
							</p:column>
							<p:column headerText="Monto">
								<h:outputText value="#{agencia.campaniaMontos}" />
							</p:column>
							<p:column headerText="N° Desembolsos">
								<h:outputText value="#{agencia.otroDesembolzos}" />
							</p:column>
							<p:column headerText="Monto">
								<h:outputText value="#{agencia.otroMontos}" />
							</p:column>

							<p:column headerText="N° Clientes">
								<h:outputText value="#{agencia.carteraClientes}" />
							</p:column>
							<p:column headerText="N° Creditos">
								<h:outputText value="#{agencia.carteraCreditos}" />
							</p:column>
							<p:column headerText="Saldos">
								<h:outputText value="#{agencia.carteraSaldos}" />
							</p:column>
							<p:column headerText="N° Clientes">
								<h:outputText value="#{agencia.carteraAnteriorClientes}" />
							</p:column>
							<p:column headerText="N° Creditos">
								<h:outputText value="#{agencia.carteraAnteriorCreditos}" />
							</p:column>
							<p:column headerText="Saldos">
								<h:outputText value="#{agencia.carteraAnteriorSaldos}" />
							</p:column>
							<p:rowExpansion>
								<p:dataTable id="datatable-analista"
									value="#{agencia.analistas}" var="analista" emptyMessage="">
									<p:column style="width:16px">
									</p:column>
									<p:column>
										<h:outputText value="#{analista.nombre}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.nuevoDesembolzo}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.nuevoMonto}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.campaniaDesembolzo}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.campaniaMonto}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.otroDesembolzo}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.otroMonto}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.carteraClientes}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.carteraCreditos}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.carteraSaldo}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.carteraAnteriorClientes}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.carteraAnteriorCreditos}" />
									</p:column>
									<p:column>
										<h:outputText value="#{analista.carteraAnteriorSaldo}" />
									</p:column>
								</p:dataTable>
							</p:rowExpansion>
						</p:dataTable>
					</div>

					<div class="ui-g-12">
						<p:treeTable id="treeTable-agenciasTree"
							value="#{demoWeb.rootReporte}" var="document">
							<p:columnGroup type="header">
								<p:row>
									<p:column rowspan="3" headerText="Agencia"
										sortBy="#{document.nombre}" />
									<p:column colspan="6" headerText="Productividad" />
									<p:column colspan="6" headerText="" />
								</p:row>
								<p:row>
									<p:column colspan="2" headerText="Nuevos" />
									<p:column colspan="2" headerText="Campañas" />
									<p:column colspan="2" headerText="Otros" />
									<p:column colspan="3" headerText="Cartera Actual" />
									<p:column colspan="3" headerText="Cartera Anterior" />
								</p:row>
								<p:row>
									<p:column headerText="N° Desembolsos" />
									<p:column headerText="Monto" />
									<p:column headerText="N° Desembolsos" />
									<p:column headerText="Monto" />
									<p:column headerText="N° Desembolsos" />
									<p:column headerText="Monto" />
									<p:column headerText="Nro Clientes" />
									<p:column headerText="Nro Creditos" />
									<p:column headerText="Saldos" />
									<p:column headerText="Nro Clientes" />
									<p:column headerText="Nro Creditos" />
									<p:column headerText="Saldos" />
								</p:row>
							</p:columnGroup>

							<p:column>
								<h:outputText value="#{document.nombre}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.nuevoDesembolzo}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.nuevoMonto}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.campaniaMonto}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.campaniaMonto}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.otroDesembolzo}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.otroMonto}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.carteraClientes}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.carteraCreditos}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.carteraSaldos}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.carteraAnteriorClientes}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.carteraAnteriorCreditos}" />
							</p:column>
							<p:column>
								<h:outputText value="#{document.carteraAnteriorSaldos}" />
							</p:column>
						</p:treeTable>
					</div>
					<div class="ui-g-6">
						<p:barChart id="char-agencias" model="#{demoWeb.barCharAgencias}"
							style="width: 100%; height: 500px;" />
					</div>
					<div class="ui-g-6">
						<p:barChart id="char-mixAgencias" model="#{demoWeb.mixedAgencias}"
							style="width: 100%; height: 500px;" />
					</div>
				</h:form>
			</pe:layoutPane>
		</pe:layout>

	</h:body>
</f:view>
</html>